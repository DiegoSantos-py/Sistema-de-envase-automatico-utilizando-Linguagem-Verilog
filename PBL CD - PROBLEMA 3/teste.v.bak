module teste (
    input clk,
    input reset,
    input cq,
    output reg cont1,
    output reg add_cont12
);

    // -----------------------------------------------------
    // 1) Codificação clara dos estados
    // -----------------------------------------------------
    typedef enum logic [1:0] {
        C1     = 2'b00,
        CONT1  = 2'b01,
        CONT12 = 2'b10
    } state_t;

    state_t state, nextstate;

    // -----------------------------------------------------
    // 2) Registrador de estado (padrão Quartus)
    // -----------------------------------------------------
    always_ff @(posedge clk or posedge reset) begin
        if (reset)
            state <= C1;
        else
            state <= nextstate;
    end

    // -----------------------------------------------------
    // 3) Lógica de próximo estado (FSM limpa)
    // -----------------------------------------------------
    always_comb begin
        nextstate = state;

        case (state)

            // -------------------------
            // ESTADO C1
            // -------------------------
            C1: begin
                if (cq)
                    nextstate = CONT1;   // incrementa cont1
            end

            // -------------------------
            // ESTADO CONT1
            // -------------------------
            CONT1: begin
                if (cq)
                    nextstate = CONT12; // incrementa cont12
                else
                    nextstate = C1;     // volta ao início do ciclo
            end

            // -------------------------
            // ESTADO CONT12
            // -------------------------
            CONT12: begin
                nextstate = C1;         // sempre volta para o início
            end

        endcase
    end

    // -----------------------------------------------------
    // 4) Lógica de saída — Moore (depende só do estado)
    // -----------------------------------------------------
    always_comb begin
        cont1       = 0;
        add_cont12  = 0;

        case (state)
            CONT1:  cont1      = 1;
            CONT12: add_cont12 = 1;
        endcase
    end

endmodule
